- [首页](../README.md "Java Interview Docs")
1. SSL/TLS 的工作原理
   SSL/TLS 运行在 TCP 之上。所有传输的内容都经过加密,加密采用对称加密,但对称加密的密钥用服务器方的证书进行了非对称加密
   通信双方只需要一次非对称加密,交换对称加密的密钥,在之后的信息通信中,使用绝对安全的密钥,对信息进行对称加密,即可保证传输消息的保密性。
   CA 会给各个服务器颁发证书,证书存储在服务器上,并附有CA的电子签名,客户端获取了服务器的证书后,证书上又包含着服务器的公钥信息。
2. 301 永久重定向,302 临时重定向
3. PUT:用于完全替换资源,PATCH:用于部分更新资源
4. https请求过程
    - 客户端请求服务器:客户端向服务器发送一个HTTPS请求,请求服务器提供一个安全的连接。
    - 服务器响应:服务器将自己的SSL/TLS证书发送给客户端。这个证书包含了服务器的公钥和其他信息。
    - 客户端验证证书:客户端使用内置的CA公钥(通常是预装在操作系统或浏览器的根证书中)来验证服务器发送的证书。验证过程包括检查证书的颁发机构、有效期、域名等。
    - 客户端生成对称密钥:一旦客户端信任了服务器的证书,客户端就会生成一个临时的对称密钥(也称为会话密钥),这个密钥将用于后续通信的加密和解密。
    - 客户端使用服务器公钥加密对称密钥:客户端使用从服务器证书中提取的公钥加密这个对称密钥,并将加密后的密钥发送给服务器。
    - 服务器接收加密的对称密钥:服务器接收到加密后的对称密钥。
    - 服务器使用自己的私钥解密对称密钥:服务器使用自己私钥(存储在服务器上的某个安全位置,通常是硬件安全模块或操作系统密钥库中)来解密这个对称密钥。
    - 双方使用对称密钥进行通信:现在,双方都拥有了这个对称密钥,后续的所有通信都将使用这个密钥进行加密和解密,以确保通信的机密性和完整性。
5. TLS 双向认证
   - 在双向认证中，服务器会额外发送CertificateRequest
   - 客户端返回自己的证书，从本地证书库中选择一个受服务器信任 CA 签发的客户端证书，发送给服务器
   - 客户端对 握手上下文数据（hash）进行私钥签名
   - 服务器使用客户端证书中的 公钥，验证签名是否合法
6. TCP三次握手四次挥手机制
7. 为什么要三次握手，而不是两次
   - client发送了第一个连接的请求报文，但是由于网络不好，这个请求没有立即到达服务端，而是在某个网络节点中滞留了，直到某个时间才到达server
   - 本来这已经是一个失效的报文，但是server端接收到这个请求报文后，还是会想client发出确认的报文，表示同意连接。
   - 假如不采用三次握手，那么只要server发出确认，新的建立就连接了，但其实这个请求是失效的请求，client是不会理睬server的确认信息，也不会向服务端发送确认的请求
   - 但是server认为新的连接已经建立起来了，并一直等待client发来数据，这样，server的很多资源就没白白浪费掉了
8. 为什么要四次挥手，为什么不能把服务端发送的 ACK 和 FIN 合并起来，变成三次
   - 因为服务端收到客户端断开连接的请求时，可能还有一些数据没有发完，这时先回复 ACK，表示接收到了断开连接的请求。
   - 等到数据发完之后再发 FIN，断开服务端到客户端的数据传送。
9. HTTP和HTTPS
   - HTTP 协议运行在 TCP 之上，所有传输的内容都是明文，客户端和服务器端都无法验证对方的身份。
   - HTTPS 是运行在 SSL/TLS 之上的 HTTP 协议，SSL/TLS 运行在 TCP 之上。所有传输的内容都经过加密，加密采用对称加密，但对称加密的密钥用服务器方的证书进行了非对称加密。
   - 所以说，HTTP 安全性没有 HTTPS 高，但是 HTTPS 比 HTTP 耗费更多服务器资源。
   - 服务器的证书包含了公钥，客户端使用这个公钥来加密会话密钥。服务器使用私钥解密这个会话密钥，从而双方可以安全地进行对称加密的数据传输。这个过程确保了对称加密密钥的安全交换，防止了第三方在传输过程中窃取密钥。
10. 四层负载均衡和七层负载均衡
    - 四层负载均衡（如LVS） 工作在 OSI 模型第四层，也就是传输层，这一层的主要协议是 TCP/UDP，负载均衡器在这一层能够看到数据包里的源端口地址以及目的端口地址，会基于这些信息通过一定的负载均衡算法将数据包转发到后端真实服务器。也就是说，四层负载均衡的核心就是 IP+端口层面的负载均衡，不涉及具体的报文内容。
    - 七层负载均衡（如Nginx） 工作在 OSI 模型第七层，也就是应用层，这一层的主要协议是 HTTP 。这一层的负载均衡比四层负载均衡路由网络请求的方式更加复杂，它会读取报文的数据部分（比如说我们的 HTTP 部分的报文），然后根据读取到的数据内容（如 URL、Cookie）做出负载均衡决策。也就是说，七层负载均衡器的核心是报文内容（如 URL、Cookie）层面的负载均衡，执行第七层负载均衡的设备通常被称为 反向代理服务器 。
11. 什么是 CDN
    - CDN 就是将静态资源分发到多个不同的地方以实现就近访问，进而加快静态资源的访问速度，减轻服务器以及带宽的负担
12. 访问网页的全过程
    - 在浏览器中输入指定网页的 URL。
    - 浏览器通过 DNS 协议，获取域名对应的 IP 地址。
    - 浏览器根据 IP 地址和端口号，向目标服务器发起一个 TCP 连接请求。
    - 浏览器在 TCP 连接上，向服务器发送一个 HTTP 请求报文，请求获取网页的内容。
    - 服务器收到 HTTP 请求报文后，处理请求，并返回 HTTP 响应报文给浏览器。
    - 浏览器收到 HTTP 响应报文后，解析响应体中的 HTML 代码，渲染网页的结构和样式，同时根据 HTML 中的其他资源的 URL（如图片、CSS、JS 等），再次发起 HTTP 请求，获取这些资源的内容，直到网页完全加载显示。
13. OSI七层模型的分层与功能
    - **应用层 (Application Layer)**
      - **功能**: 为应用程序提供网络服务接口，是用户直接接触的一层。
      - **协议/应用**: HTTP, FTP, SMTP, DNS。
    - **表示层 (Presentation Layer)**
      - **功能**: 负责数据格式的转换、加密解密、压缩解压，确保一个系统的应用层所发送的信息可以被另一个系统的应用层读取。
      - **格式**: JPEG, ASCII, JSON。
    - **会话层 (Session Layer)**
      - **功能**: 建立、管理和终止两个通信主机之间的会话连接。
    - **传输层 (Transport Layer)**
      - **功能**: 提供端到端的可靠或不可靠数据传输服务，以及端口号寻址、流量控制和差错校验。
      - **协议**: TCP, UDP。 **数据单元**: 段 (Segment)。
    - **网络层 (Network Layer)**
      - **功能**: 负责逻辑地址（IP地址）寻址和路由选择，将数据包从源头送到目的地。
      - **设备/协议**: 路由器 (Router), IP协议。 **数据单元**: 包 (Packet)。
    - **数据链路层 (Data Link Layer)**
      - **功能**: 负责物理地址（MAC地址）寻址、数据成帧、流量控制和差错校验。
      - **设备**: 交换机 (Switch)。 **数据单元**: 帧 (Frame)。
    - **物理层 (Physical Layer)**
      - **功能**: 定义物理设备标准，如网线的接口类型、光纤的接口类型、各种传输介质的传输速率等。它负责传输原始的比特流。
      - **设备**: 网卡, 集线器 (Hub)。 **数据单元**: 比特 (Bit)。
